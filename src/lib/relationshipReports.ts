/**
 * Sternberg 和 Gottman 关系类型详细解析
 * 用于双人匹配结果页面
 */

export type SternbergType = 
  | 'LIKING'
  | 'INFATUATION'
  | 'EMPTY'
  | 'ROMANTIC'
  | 'COMPANIONATE'
  | 'FOOLISH'
  | 'CONSUMMATE'

export type GottmanType =
  | 'NONE'
  | 'CRITICISM'
  | 'DEFENSIVENESS'
  | 'STONEWALLING'
  | 'CONTEMPT'

export interface SternbergReport {
  name: string
  emoji: string
  tone: string
  advantages: string
  risks: string
  suggestions: string
}

export interface GottmanReport {
  name: string
  emoji: string
  tone: string
  advantages: string
  risks: string
  suggestions: string
}

export const STERNBERG_REPORTS: Record<SternbergType, SternbergReport> = {
  LIKING: {
    name: '喜欢型爱情',
    emoji: '💗',
    tone: '关系基调：像密友、信任、自在、知心。\n这种关系中，两人最强的是情绪连结，关系中的你们很懂彼此、话题顺畅、气氛轻松自然。',
    advantages: '这种关系拥有深度理解与情绪支持，让你们感到安全、舒服、不紧绷，生活中默契很高，能够轻松自然地相处。',
    risks: '然而，很多事情可能会缺少推动力，对未来的承诺动力偏弱，容易陷入"关系好却不往前"的僵局，需要主动打破这种舒适圈。',
    suggestions: '建议通过增加新鲜感（活动、体验）来提升激情，主动讨论未来，强化两人间的承诺与绑定，避免长时间停在"像朋友般的关系"阶段。'
  },
  INFATUATION: {
    name: '迷恋型爱情',
    emoji: '🔥',
    tone: '关系基调：强烈吸引、迅速靠近、情绪浓度高。\n这段关系的核心是激情与心动，强烈连接的两人能很轻易的感受到彼此的情绪与火热，会很快被点燃。',
    advantages: '这种关系充满浓烈的浪漫和强烈的"化学反应"，对彼此高度关注，激情带来强烈的靠近感，让你们感受到前所未有的心动与连接。',
    risks: '但缺乏稳定性基础，在感情中因为回应不稳定或节奏差异而容易焦虑，发展过程中可能会出现节奏过快，需要更多时间建立深度了解。',
    suggestions: '建议放慢节奏，让对彼此的了解与承诺自然出现，增加深度对话与共同记忆，避免只依赖激情维持关系，为感情建立更稳固的基础。'
  },
  EMPTY: {
    name: '空洞型爱情',
    emoji: '💍',
    tone: '关系基调：责任、稳定、结构、长期规划。\n两人对未来有一致性与承诺感，是"稳定想要一起走下去"的关系。',
    advantages: '这种关系稳定、可靠、方向一致，拥有强烈的责任感与面对事物成熟的处理能力，能共同规划长期关系（家庭、未来），为彼此提供安全感。',
    risks: '但也许会缺乏亲密的情绪互动，生活中也许缺少浪漫的回忆或热烈的吸引，可能会导致"虽然关系稳定，但情感逐渐变得过于平淡"的情况。',
    suggestions: '建议增加一点浪漫仪式感，创造情绪交流空间，不要只依赖承诺支撑关系，让感情在稳定的基础上也能保持温度与活力。'
  },
  ROMANTIC: {
    name: '浪漫型爱情',
    emoji: '💞',
    tone: '关系基调：深度连结、强烈心动\n这是三角中活力最强的类型，既懂彼此、又被彼此吸引，是最经典的"恋爱感"。',
    advantages: '高亲密与高激情的结合让你们的相处自然而心动，互动热烈且深刻，双方都愿意维持热度，这是最理想的恋爱状态。',
    risks: '但承诺偏弱，在面对问题时容易因现实压力动摇，初期热烈体验感强但未来可能会面临风险，需要将激情转化为更持久的承诺。',
    suggestions: '建议把热度延伸到生活细节、结构中，增加未来规划的讨论，建立一致的情感与生活节奏，让浪漫的激情能够持续并转化为长期承诺。'
  },
  COMPANIONATE: {
    name: '伙伴型爱情',
    emoji: '🏡',
    tone: '关系基调：稳定、默契、互相支持，是最适合长期走下去的类型。\n这种关系拥有极高的"相伴能力"，像最好的朋友，也像真正的伴侣。',
    advantages: '这种关系长久且可靠，情绪交流顺畅、安全感强，非常适合共同建设人生（事业、家庭），是理想的长期伴侣关系。',
    risks: '但缺乏激情，处理不当容易变成"室友模式"，当模式状态过于稳定时可能会缺少新鲜感，需要主动为关系注入活力。',
    suggestions: '建议创造新鲜体验维持热情，日常中更多为对方制造浪漫的时刻，增加情绪流动，平衡"生活合作"与"恋爱感觉"之间的体验。'
  },
  FOOLISH: {
    name: '愚昧型爱情',
    emoji: '🔥💍',
    tone: '关系基调：投入快、承诺强，但关系的发展中可能缺乏对对方的深刻了解。\n这种关系多发生在怦然心动而开始的热恋之后，热情似火的开始可能会随着时间的发展迸发不一样的火花。',
    advantages: '这种关系情绪强烈、愿意承担，行动力强，能够很快进入关系结构，感情中感情浓度高，双方都愿意为关系投入。',
    risks: '但建立强烈承诺的源头可能伴随着冲动，在面对矛盾时容易产生冲突，对双方的共同热情要求较高，若一方退缩，另一方会感到失衡。',
    suggestions: '建议让关系多一点"慢下来"的部分，增加彼此深度了解，补足亲密基础，避免"先承诺再理解"的模式，让激情与承诺建立在更深的了解之上。'
  },
  CONSUMMATE: {
    name: '完全型爱情',
    emoji: '💎',
    tone: '关系基调：三角理论的理想状态，全维度高分。\n这是最成熟、最完整、最均衡的关系，兼具深度、心动与未来。',
    advantages: '这种关系情绪稳定的同时对关系激情不减，有默契、也有行动力，最容易形成健康长期伴侣关系，是爱情三角理论的理想状态。',
    risks: '但要维持三者平衡需要渗透到生活中的持续努力，一旦某一项掉落，关系会明显感到失衡，需要双方共同维护这种完美的平衡。',
    suggestions: '建议持续营造亲密的情绪交流，通过共同制造新鲜体验的方式维持激情，共同为未来进行规划，巩固关系中的承诺，让这种完美的平衡得以持续。'
  }
}

export const GOTTMAN_REPORTS: Record<GottmanType, GottmanReport> = {
  NONE: {
    name: '全无型关系',
    emoji: '✅',
    tone: '关系基调：健康、稳定、互相支持。 两人在沟通中几乎没有出现批评、防御、冷战或轻蔑，这种关系属于 Gottman 所定义的"稳定型关系"，冲突是被妥善处理的，而不是被压抑或拉扯的。',
    advantages: '这种关系拥有高质量沟通，不攻击、不逃避、不敌对，冲突不会破坏关系，反而能带来更好的理解，安全感强，对彼此的好感度维持稳定。',
    risks: '但若缺乏深度沟通，可能会出现表面上的"过度平和"而导致内在情绪被忽略，双方习惯不争吵，但有时可能也会"错过重要的对话"。',
    suggestions: '建议继续维持开放式沟通态度，鼓励以温柔真诚的方式表达请求，而非默默等待对方理解，主动谈及深层需求，而不是完全依赖自然发生的沟通。'
  },
  CRITICISM: {
    name: '批评型',
    emoji: '⚡',
    tone: '关系基调：生活中的不满演变成"人格攻击"、或"你总是/你从不"的表达方式。 这类关系的问题不是意见不同，而是表达方式容易演变成指责，让伴侣感到被否定或被责怪。',
    advantages: '这种关系中，双方愿意表达需求，而不是完全闭口不言，关系并未进入敌对或破裂，而是仍在沟通尝试，说明双方都还在努力。',
    risks: '但批评式的表达容易伤害伴侣的自尊与被接纳感，长期不恰当的沟通方式有可能会引发对方的防御或退缩，关系沟通中容易出现"我错了，你满意了吗"的恶性循环。',
    suggestions: '建议将"指责句"改为"我感受句"：将"你从不关心我"改为"我最近感到有点孤单，我希望你能陪我"。将需求与自己的感受清晰表达，创造更多积极互动，采用Gottman 的 5:1 原则：每一次负面互动用五次正向互动来平衡。'
  },
  DEFENSIVENESS: {
    name: '防御型',
    emoji: '🛡',
    tone: '关系基调：双方容易互相解释、互相辩护，沟通过程长期处在在"自我保护"阶段。 防御型通常伴随着对方的负面情绪，尤其是在面对批评或期待时，会自动进入防御状态：解释、反驳、下意识的找理由。',
    advantages: '这种关系中，双方在乎彼此的看法，不愿意冲突升级，属于"关系仍在互动中"的状态，而非停止沟通，说明双方都还在努力维护关系。',
    risks: '但过度的防御与解释容易造成对方觉得"我需要你听我，你却一直在解释自己"，负面情绪循环升级，使双方都缺乏被理解的感受，讨论关注点发展变成"谁对谁错"，而不是"我们怎么更好"。',
    suggestions: '建议面对对方的表达时，停止即时反应，先重复对方的感受或需求加深理解，避免立即解释或澄清意图，这会让对方感到被否定。引入 Gottman 的"接受责任"技巧："我理解你这样感受，我也可以做得更好一些"。'
  },
  STONEWALLING: {
    name: '冷战型',
    emoji: '❄',
    tone: '关系基调：情绪关闭、抽离、不回应，是最典型的"情绪逃避型冲突"。 冷战型并不是冷酷，而是情绪过载后的关机模式，面对冲突时会选择沉默、离开、停止回应、用距离保护自己。',
    advantages: '这种关系中，通常有着敏感敏锐的情绪感知力，能够避免激烈争吵，保护关系免于即时爆炸，给双方一个冷静的空间。',
    risks: '但长期下来会让另一方感到孤立、被拒绝、被忽视，关系容易变成"冲突不解决而累积，可最终必定爆发"的循环，缺乏沟通会削弱亲密度。',
    suggestions: '建议使用 Gottman 的"生理降温暂停"，允许自己冷静休息至少 20 分钟。感受到需要情绪空间时明确表达："我需要冷静一下，但我会回来继续谈。"双方共同建立固定的情绪修复或对话时间（Repair Conversation），学会表达真实的自我情绪，说出"我现在压力很大"，而不是直接消失。'
  },
  CONTEMPT: {
    name: '轻蔑型',
    emoji: '👑',
    tone: '关系基调：讽刺、嘲笑、冷淡优越感，是 Gottman 判断关系最为危险的指标。 这里的轻蔑不是情绪，而是"我比你更好"、"你让我失望"的态度，有时带有情绪非常负面的互动。',
    advantages: '这种关系中，强烈的信号代表关系中确实存在真实需求未被满足，是重要信号：这段关系急需修复，而不是说明双方无感放弃，还有挽回的可能。',
    risks: '但根据Gottman 研究，"轻蔑"是最能预测关系破裂的单一因素，会直接摧毁安全感，使另一方感到恐惧或自我怀疑，形成"敌对式相处"与负面循环。',
    suggestions: '建议加强联系"尊重与欣赏训练"，多向伴侣表达正向情绪，避免带刺的玩笑、讽刺语气，或任何非语言轻蔑。把批评转成"正向需求表达"，由"你怎么总是这样？"改为"我希望我们能一起做到…"。如果感知到关系中"轻蔑"已频繁出现，建议双方进行结构化沟通练习（如 Gottman 的 State of the Union Meeting）。'
  }
}

/**
 * 获取 Sternberg 类型报告
 */
export function getSternbergReport(type: SternbergType): SternbergReport {
  return STERNBERG_REPORTS[type] || STERNBERG_REPORTS.LIKING
}

/**
 * 获取 Gottman 类型报告
 */
export function getGottmanReport(type: GottmanType): GottmanReport {
  return GOTTMAN_REPORTS[type] || GOTTMAN_REPORTS.NONE
}

